//CHECKSUM:868c93fb11e61e4cf4bedddab0e8c1c328dc23be1071376daa86a545b8b1d55a
"use strict";

const base = require('./_base');

const Card = require('./card');

const url = require('url');

function render(data) {
  const events = [];

  if (data.typing) {
    events.push({
      type: 'typing',
      value: data.typing
    });
  }

  return [...events, {
    text: ' ',
    type: 'carousel',
    elements: data.items.map(card => ({
      title: card.title,
      picture: card.image ? url.resolve(data.BOT_URL, card.image) : null,
      subtitle: card.subtitle,
      buttons: (card.actions || []).map(a => {
        if (a.action === 'Say something') {
          return {
            type: 'say_something',
            title: a.title,
            text: a.text
          };
        } else if (a.action === 'Open URL') {
          return {
            type: 'open_url',
            title: a.title,
            url: a.url && a.url.replace('BOT_URL', data.BOT_URL)
          };
        } else if (a.action === 'Postback') {
          return {
            type: 'postback',
            title: a.title,
            payload: a.payload
          };
        } else {
          throw new Error(`Webchat carousel does not support "${a.action}" action-buttons at the moment`);
        }
      })
    }))
  }];
}

function renderMessenger(data) {
  const renderElements = data => {
    return data.items.map(card => ({
      title: card.title,
      image_url: card.image ? url.resolve(data.BOT_URL, card.image) : null,
      subtitle: card.subtitle,
      buttons: (card.actions || []).map(a => {
        if (a.action === 'Say something') {
          throw new Error('Channel-Messenger carousel does not support "Say something" action-buttons at the moment');
        } else if (a.action === 'Open URL') {
          return {
            type: 'web_url',
            url: a.url,
            title: a.title
          };
        } else {
          throw new Error(`Channel-Messenger carousel does not support "${a.action}" action-buttons at the moment`);
        }
      })
    }));
  };

  return [{
    type: 'typing',
    value: data.typing
  }, {
    attachment: {
      type: 'template',
      payload: {
        template_type: 'generic',
        elements: renderElements(data)
      }
    }
  }];
}

function renderElement(data, channel) {
  if (channel === 'web' || channel === 'api' || channel === 'telegram') {
    return render(data);
  } else if (channel === 'messenger') {
    return renderMessenger(data);
  }

  return []; // TODO Handle channel not supported
}

module.exports = {
  id: 'builtin_carousel',
  group: 'Built-in Messages',
  title: 'Carousel',
  jsonSchema: {
    description: 'A carousel is an array of cards',
    type: 'object',
    required: ['items'],
    properties: {
      items: {
        type: 'array',
        title: 'Carousel Cards',
        items: Card.jsonSchema
      },
      ...base.typingIndicators
    }
  },
  computePreviewText: formData => formData.items && `Carousel: (${formData.items.length}) ${formData.items[0].title}`,
  renderElement: renderElement
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcm91c2VsLmpzIl0sIm5hbWVzIjpbImJhc2UiLCJyZXF1aXJlIiwiQ2FyZCIsInVybCIsInJlbmRlciIsImRhdGEiLCJldmVudHMiLCJ0eXBpbmciLCJwdXNoIiwidHlwZSIsInZhbHVlIiwidGV4dCIsImVsZW1lbnRzIiwiaXRlbXMiLCJtYXAiLCJjYXJkIiwidGl0bGUiLCJwaWN0dXJlIiwiaW1hZ2UiLCJyZXNvbHZlIiwiQk9UX1VSTCIsInN1YnRpdGxlIiwiYnV0dG9ucyIsImFjdGlvbnMiLCJhIiwiYWN0aW9uIiwicmVwbGFjZSIsInBheWxvYWQiLCJFcnJvciIsInJlbmRlck1lc3NlbmdlciIsInJlbmRlckVsZW1lbnRzIiwiaW1hZ2VfdXJsIiwiYXR0YWNobWVudCIsInRlbXBsYXRlX3R5cGUiLCJyZW5kZXJFbGVtZW50IiwiY2hhbm5lbCIsIm1vZHVsZSIsImV4cG9ydHMiLCJpZCIsImdyb3VwIiwianNvblNjaGVtYSIsImRlc2NyaXB0aW9uIiwicmVxdWlyZWQiLCJwcm9wZXJ0aWVzIiwidHlwaW5nSW5kaWNhdG9ycyIsImNvbXB1dGVQcmV2aWV3VGV4dCIsImZvcm1EYXRhIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBcEI7O0FBQ0EsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFDQSxNQUFNRSxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxLQUFELENBQW5COztBQUVBLFNBQVNHLE1BQVQsQ0FBZ0JDLElBQWhCLEVBQXNCO0FBQ3BCLFFBQU1DLE1BQU0sR0FBRyxFQUFmOztBQUVBLE1BQUlELElBQUksQ0FBQ0UsTUFBVCxFQUFpQjtBQUNmRCxJQUFBQSxNQUFNLENBQUNFLElBQVAsQ0FBWTtBQUNWQyxNQUFBQSxJQUFJLEVBQUUsUUFESTtBQUVWQyxNQUFBQSxLQUFLLEVBQUVMLElBQUksQ0FBQ0U7QUFGRixLQUFaO0FBSUQ7O0FBRUQsU0FBTyxD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aEMsSUFBQUEsSUFBSSxFQUFFLFFBRkk7QUFHVmlDLElBQUFBLFFBQVEsRUFBRSxDQUFDLE9BQUQsQ0FIQTtBQUlWQyxJQUFBQSxVQUFVLEVBQUU7QUFDVjlCLE1BQUFBLEtBQUssRUFBRTtBQUNMSixRQUFBQSxJQUFJLEVBQUUsT0FERDtBQUVMTyxRQUFBQSxLQUFLLEVBQUUsZ0JBRkY7QUFHTEgsUUFBQUEsS0FBSyxFQUFFWCxJQUFJLENBQUNzQztBQUhQLE9BREc7QUFNVixTQUFHeEMsSUFBSSxDQUFDNEM7QUFORTtBQUpGLEdBTEc7QUFrQmZDLEVBQUFBLGtCQUFrQixFQUFFQyxRQUFRLElBQUlBLFFBQVEsQ0FBQ2pDLEtBQVQsSUFBbUIsY0FBYWlDLFFBQVEsQ0FBQ2pDLEtBQVQsQ0FBZWtDLE1BQU8sS0FBSUQsUUFBUSxDQUFDakMsS0FBVCxDQUFlLENBQWYsRUFBa0JHLEtBQU0sRUFsQm5HO0FBbUJma0IsRUFBQUEsYUFBYSxFQUFFQTtBQW5CQSxDQUFqQiIsInNvdXJjZVJvb3QiOiIvdmFyL2xpYi9qZW5raW5zL3dvcmtzcGFjZS9idWlsZC13aW5kb3dzL21vZHVsZXMvYnVpbHRpbi9zcmMvYmFja2VuZCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJhc2UgPSByZXF1aXJlKCcuL19iYXNlJylcbmNvbnN0IENhcmQgPSByZXF1aXJlKCcuL2NhcmQnKVxuY29uc3QgdXJsID0gcmVxdWlyZSgndXJsJylcblxuZnVuY3Rpb24gcmVuZGVyKGRhdGEpIHtcbiAgY29uc3QgZXZlbnRzID0gW11cblxuICBpZiAoZGF0YS50eXBpbmcpIHtcbiAgICBldmVudHMucHVzaCh7XG4gICAgICB0eXBlOiAndHlwaW5nJyxcbiAgICAgIHZhbHVlOiBkYXRhLnR5cGluZ1xuICAgIH0pXG4gIH1cblxuICByZXR1cm4gW1xuICAgIC4uLmV2ZW50cyxcbiAgICB7XG4gICAgICB0ZXh0OiAnICcsXG4gICAgICB0eXBlOiAnY2Fyb3VzZWwnLFxuICAgICAgZWxlbWVudHM6IGRhdGEuaXRlbXMubWFwKGNhcmQgPT4gKHtcbiAgICAgICAgdGl0bGU6IGNhcmQudGl0bGUsXG4gICAgICAgIHBpY3R1cmU6IGNhcmQuaW1hZ2UgPyB1cmwucmVzb2x2ZShkYXRhLkJPVF9VUkwsIGNhcmQuaW1hZ2UpIDogbnVsbCxcbiAgICAgICAgc3VidGl0bGU6IGNhcmQuc3VidGl0bGUsXG4gICAgICAgIGJ1dHRvbnM6IChjYXJkLmFjdGlvbnMgfHwgW10pLm1hcChhID0+IHtcbiAgICAgICAgICBpZiAoYS5hY3Rpb24gPT09ICdTYXkgc29tZXRoaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdHlwZTogJ3NheV9zb21ldGhpbmcnLFxuICAgICAgICAgICAgICB0aXRsZTogYS50aXRsZSxcbiAgICAgICAgICAgICAgdGV4dDogYS50ZXh0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChhLmFjdGlvbiA9PT0gJ09wZW4gVVJMJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdHlwZTogJ29wZW5fdXJsJyxcbiAgICAgICAgICAgICAgdGl0bGU6IGEudGl0bGUsXG4gICAgICAgICAgICAgIHVybDogYS51cmwgJiYgYS51cmwucmVwbGFjZSgnQk9UX1VSTCcsIGRhdGEuQk9UX1VSTClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGEuYWN0aW9uID09PSAnUG9zdGJhY2snKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB0eXBlOiAncG9zdGJhY2snLFxuICAgICAgICAgICAgICB0aXRsZTogYS50aXRsZSxcbiAgICAgICAgICAgICAgcGF5bG9hZDogYS5wYXlsb2FkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgV2ViY2hhdCBjYXJvdXNlbCBkb2VzIG5vdCBzdXBwb3J0IFwiJHthLmFjdGlvbn1cIiBhY3Rpb24tYnV0dG9ucyBhdCB0aGUgbW9tZW50YClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KSlcbiAgICB9XG4gIF1cbn1cblxuZnVuY3Rpb24gcmVuZGVyTWVzc2VuZ2VyKGRhdGEpIHtcbiAgY29uc3QgcmVuZGVyRWxlbWVudHMgPSBkYXRhID0+IHtcbiAgICByZXR1cm4gZGF0YS5pdGVtcy5tYXAoY2FyZCA9PiAoe1xuICAgICAgdGl0bGU6IGNhcmQudGl0bGUsXG4gICAgICBpbWFnZV91cmw6IGNhcmQuaW1hZ2UgPyB1cmwucmVzb2x2ZShkYXRhLkJPVF9VUkwsIGNhcmQuaW1hZ2UpIDogbnVsbCxcbiAgICAgIHN1YnRpdGxlOiBjYXJkLnN1YnRpdGxlLFxuICAgICAgYnV0dG9uczogKGNhcmQuYWN0aW9ucyB8fCBbXSkubWFwKGEgPT4ge1xuICAgICAgICBpZiAoYS5hY3Rpb24gPT09ICdTYXkgc29tZXRoaW5nJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hhbm5lbC1NZXNzZW5nZXIgY2Fyb3VzZWwgZG9lcyBub3Qgc3VwcG9ydCBcIlNheSBzb21ldGhpbmdcIiBhY3Rpb24tYnV0dG9ucyBhdCB0aGUgbW9tZW50JylcbiAgICAgICAgfSBlbHNlIGlmIChhLmFjdGlvbiA9PT0gJ09wZW4gVVJMJykge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnd2ViX3VybCcsXG4gICAgICAgICAgICB1cmw6IGEudXJsLFxuICAgICAgICAgICAgdGl0bGU6IGEudGl0bGVcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGFubmVsLU1lc3NlbmdlciBjYXJvdXNlbCBkb2VzIG5vdCBzdXBwb3J0IFwiJHthLmFjdGlvbn1cIiBhY3Rpb24tYnV0dG9ucyBhdCB0aGUgbW9tZW50YClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KSlcbiAgfVxuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgdHlwZTogJ3R5cGluZycsXG4gICAgICB2YWx1ZTogZGF0YS50eXBpbmdcbiAgICB9LFxuICAgIHtcbiAgICAgIGF0dGFjaG1lbnQ6IHtcbiAgICAgICAgdHlwZTogJ3RlbXBsYXRlJyxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIHRlbXBsYXRlX3R5cGU6ICdnZW5lcmljJyxcbiAgICAgICAgICBlbGVtZW50czogcmVuZGVyRWxlbWVudHMoZGF0YSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXVxufVxuXG5mdW5jdGlvbiByZW5kZXJFbGVtZW50KGRhdGEsIGNoYW5uZWwpIHtcbiAgaWYgKGNoYW5uZWwgPT09ICd3ZWInIHx8IGNoYW5uZWwgPT09ICdhcGknIHx8IGNoYW5uZWwgPT09ICd0ZWxlZ3JhbScpIHtcbiAgICByZXR1cm4gcmVuZGVyKGRhdGEpXG4gIH0gZWxzZSBpZiAoY2hhbm5lbCA9PT0gJ21lc3NlbmdlcicpIHtcbiAgICByZXR1cm4gcmVuZGVyTWVzc2VuZ2VyKGRhdGEpXG4gIH1cblxuICByZXR1cm4gW10gLy8gVE9ETyBIYW5kbGUgY2hhbm5lbCBub3Qgc3VwcG9ydGVkXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpZDogJ2J1aWx0aW5fY2Fyb3VzZWwnLFxuICBncm91cDogJ0J1aWx0LWluIE1lc3NhZ2VzJyxcbiAgdGl0bGU6ICdDYXJvdXNlbCcsXG5cbiAganNvblNjaGVtYToge1xuICAgIGRlc2NyaXB0aW9uOiAnQSBjYXJvdXNlbCBpcyBhbiBhcnJheSBvZiBjYXJkcycsXG4gICAgdHlwZTogJ29iamVjdCcsXG4gICAgcmVxdWlyZWQ6IFsnaXRlbXMnXSxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICB0aXRsZTogJ0Nhcm91c2VsIENhcmRzJyxcbiAgICAgICAgaXRlbXM6IENhcmQuanNvblNjaGVtYVxuICAgICAgfSxcbiAgICAgIC4uLmJhc2UudHlwaW5nSW5kaWNhdG9yc1xuICAgIH1cbiAgfSxcbiAgY29tcHV0ZVByZXZpZXdUZXh0OiBmb3JtRGF0YSA9PiBmb3JtRGF0YS5pdGVtcyAmJiBgQ2Fyb3VzZWw6ICgke2Zvcm1EYXRhLml0ZW1zLmxlbmd0aH0pICR7Zm9ybURhdGEuaXRlbXNbMF0udGl0bGV9YCxcbiAgcmVuZGVyRWxlbWVudDogcmVuZGVyRWxlbWVudFxufVxuIl19