//CHECKSUM:b4a3c1842152f426b0fb4875aa370d40b46c8b4333f018845eb274ef2a82809a
"use strict";

/**
 * Increment the number of conversations
 * @title Increment number of conversations
 * @category Storage
 * @author Botpress, Inc.
 * @param {string} output - The state variable to output the count to
 */
const incrementNumberOfConversations = async output => {
  const userId = event.target;
  const botId = event.botId;
  const key = bp.kvs.getUserStorageKey(userId, 'numberOfConversations');
  let value = await bp.kvs.getStorageWithExpiry(botId, key); // Value could be 0

  if (value === undefined) {
    value = 0;
  } else {
    value++;
  }

  await bp.kvs.setStorageWithExpiry(botId, key, value);
  temp[output] = value;
};

return incrementNumberOfConversations(args.output);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluY3JlbWVudE51bWJlck9mQ29udmVyc2F0aW9ucy5qcyJdLCJuYW1lcyI6WyJpbmNyZW1lbnROdW1iZXJPZkNvbnZlcnNhdGlvbnMiLCJvdXRwdXQiLCJ1c2VySWQiLCJldmVudCIsInRhcmdldCIsImJvdElkIiwia2V5IiwiYnAiLCJrdnMiLCJnZXRVc2VyU3RvcmFnZUtleSIsInZhbHVlIiwiZ2V0U3RvcmFnZVdpdGhFeHBpcnkiLCJ1bmRlZmluZWQiLCJzZXRTdG9yYWdlV2l0aEV4cGlyeSIsInRlbXAiLCJhcmdzIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBT0EsTUFBTUEsOEJBQThCLEdBQUcsTUFBTUMsTUFBTixJQUFnQjtBQUNyRCxRQUFNQyxNQUFNLEdBQUdDLEtBQUssQ0FBQ0MsTUFBckI7QUFDQSxRQUFNQyxLQUFLLEdBQUdGLEtBQUssQ0FBQ0UsS0FBcEI7QUFDQSxRQUFNQyxHQUFHLEdBQUdDLEVBQUUsQ0FBQ0MsR0FBSCxDQUFPQyxpQkFBUCxDQUF5QlAsTUFBekIsRUFBaUMsdUJBQWpDLENBQVo7QUFDQSxNQUFJUSxLQUFLLEdBQUcsTUFBTUgsRUFBRSxDQUFDQyxHQUFILENBQU9HLG9CQUFQLENBQTRCTixLQUE1QixFQUFtQ0MsR0FBbkMsQ0FBbEIsQ0FKcUQsQ0FLckQ7O0FBQ0EsTUFBSUksS0FBSyxLQUFLRSxTQUFkLEVBQXlCO0FBQ3ZCRixJQUFBQSxLQUFLLEdBQUcsQ0FBUjtBQUNELEdBRkQsTUFFTztBQUNMQSxJQUFBQSxLQUFLO0FBQ047O0FBRUQsUUFBTUgsRUFBRSxDQUFDQyxHQUFILENBQU9LLG9CQUFQLENBQTRCUixLQUE1QixFQUFtQ0MsR0FBbkMsRUFBd0NJLEtBQXhDLENBQU47QUFDQUksRUFBQUEsSUFBSSxDQUFDYixNQUFELENBQUosR0FBZVMsS0FBZjtBQUNELENBZEQ7O0FBZ0JBLE9BQU9WLDhCQUE4QixDQUFDZSxJQUFJLENBQUNkLE1BQU4sQ0FBckMiLCJzb3VyY2VSb290IjoiL3Zhci9saWIvamVua2lucy93b3Jrc3BhY2UvYnVpbGQtd2luZG93cy9tb2R1bGVzL2J1aWx0aW4vc3JjL2JhY2tlbmQiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGNvbnZlcnNhdGlvbnNcbiAqIEB0aXRsZSBJbmNyZW1lbnQgbnVtYmVyIG9mIGNvbnZlcnNhdGlvbnNcbiAqIEBjYXRlZ29yeSBTdG9yYWdlXG4gKiBAYXV0aG9yIEJvdHByZXNzLCBJbmMuXG4gKiBAcGFyYW0ge3N0cmluZ30gb3V0cHV0IC0gVGhlIHN0YXRlIHZhcmlhYmxlIHRvIG91dHB1dCB0aGUgY291bnQgdG9cbiAqL1xuY29uc3QgaW5jcmVtZW50TnVtYmVyT2ZDb252ZXJzYXRpb25zID0gYXN5bmMgb3V0cHV0ID0+IHtcbiAgY29uc3QgdXNlcklkID0gZXZlbnQudGFyZ2V0XG4gIGNvbnN0IGJvdElkID0gZXZlbnQuYm90SWRcbiAgY29uc3Qga2V5ID0gYnAua3ZzLmdldFVzZXJTdG9yYWdlS2V5KHVzZXJJZCwgJ251bWJlck9mQ29udmVyc2F0aW9ucycpXG4gIGxldCB2YWx1ZSA9IGF3YWl0IGJwLmt2cy5nZXRTdG9yYWdlV2l0aEV4cGlyeShib3RJZCwga2V5KVxuICAvLyBWYWx1ZSBjb3VsZCBiZSAwXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmFsdWUgPSAwXG4gIH0gZWxzZSB7XG4gICAgdmFsdWUrK1xuICB9XG5cbiAgYXdhaXQgYnAua3ZzLnNldFN0b3JhZ2VXaXRoRXhwaXJ5KGJvdElkLCBrZXksIHZhbHVlKVxuICB0ZW1wW291dHB1dF0gPSB2YWx1ZVxufVxuXG5yZXR1cm4gaW5jcmVtZW50TnVtYmVyT2ZDb252ZXJzYXRpb25zKGFyZ3Mub3V0cHV0KVxuIl19